{% extends 'base.html' %}
{% load static %}


{% block content %}

 <div class="max-w-4xl mx-auto p-8">
        <h1 class="text-3xl font-semibold text-center text-gray-700 mb-6 p-5 bg-black/80 text-white">Dodaj Sliku</h1>

        <!-- Forma za upload -->
        <form action="image_upload" method="POST" class="dropzone" id="imageDropzone" enctype="multipart/form-data">
            {% csrf_token %}
        </form>
        <br>
        <div class="flex justify-end">
            <p class=" w-fit bg-gray-200 p-5 hover:bg-gray-400 cursor-pointer hover:text-white rounded-lg" onclick="location.reload();">Dodaj sledecu</p>
        </div>

        <div class="mt-6">
            <div id="imagePreview" class="mt-4 grid grid-cols-3 gap-4">
                <!-- Slike će biti prikazane ovde -->
            </div>
        </div>
    </div>

    <script>
        // Inicijalizuj Dropzone sa željenim opcijama
        Dropzone.options.imageDropzone = {
            paramName: "file", // Parametar koji šaljemo serveru
            maxFilesize: 10, // Maksimalna veličina fajla (u MB)
            acceptedFiles: 'image/*', // Samo slike
            dictDefaultMessage: "Povucite i spustite slike ovde ili kliknite za odabir", // Poruka kada nema fajlova
            init: function() {
                this.on("success", function(file, response) {
                    // Kada je slika uspešno uploadovana, prikaži je u preview-u
                    const imagePreview = document.getElementById('imagePreview');
                    const imgElement = document.createElement('img');
                    imgElement.src = response.file_url; // Pretpostavljamo da server vraća URL slike
                    imgElement.classList.add('w-full', 'h-auto', 'rounded-lg');
                    imagePreview.appendChild(imgElement);
                });

                this.on("error", function(file, response) {
                    alert("Došlo je do greške prilikom upload-a.");
                });
            }
        };
    </script>
{% endblock %}

